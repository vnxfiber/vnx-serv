document.addEventListener("DOMContentLoaded",function(){AOS.init({duration:800,easing:"ease-in-out",once:!0,mirror:!1,offset:50});let d=new bootstrap.Modal(document.getElementById("scheduleModal"));document.querySelectorAll('input[type="tel"]').forEach(e=>{e.addEventListener("input",function(e){let t=e.target.value.replace(/\D/g,"");t.length<=11&&5<(t=10<(t=2<t.length?"("+t.substring(0,2)+") "+t.substring(2):t).length?t.substring(0,10)+"-"+t.substring(10):t).length&&t.length<=10&&(t=t.substring(0,9)+"-"+t.substring(9)),e.target.value=t})}),document.querySelectorAll('input[type="date"]').forEach(e=>{e.addEventListener("blur",function(e){e.target.value&&(e=new Date(e.target.value),isNaN(e.getTime()))})});{let s=document.getElementById("contact-form");s&&s.addEventListener("submit",function(e){e.preventDefault();var e=document.getElementById("name"),t=document.getElementById("email"),n=document.getElementById("phone"),a=document.getElementById("subject"),o=document.getElementById("message");[e,t,n,a,o].forEach(e=>{e.classList.remove("is-invalid"),e.classList.remove("is-valid");var e=e.parentNode,t=e.querySelector(".invalid-feedback");t&&e.removeChild(t)});let r=!0;if((!e.value.trim()||e.value.trim().length<3)&&(l(e,"Por favor, informe seu nome completo"),r=!1),c(t.value)||(l(t,"Por favor, informe um e-mail válido"),r=!1),!n.value||10<=n.value.replace(/\D/g,"").length||(l(n,"Por favor, informe um telefone válido"),r=!1),a.options[a.selectedIndex].disabled&&(l(a,"Por favor, selecione um assunto"),r=!1),(!o.value.trim()||o.value.trim().length<10)&&(l(o,"Por favor, digite uma mensagem com pelo menos 10 caracteres"),r=!1),r){let e=s.querySelector('button[type="submit"]'),t=e.innerHTML;e.disabled=!0,e.innerHTML='<i class="fas fa-spinner fa-spin me-2"></i>Enviando...',setTimeout(()=>{e.innerHTML=t,e.disabled=!1,i("success","Mensagem enviada com sucesso! Entraremos em contato em breve."),s.reset()},1500)}})}function c(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function l(e,t){e.classList.add("is-invalid");var n=document.createElement("div");n.className="invalid-feedback",n.textContent=t,e.parentNode.appendChild(n),1===document.querySelectorAll(".is-invalid").length&&e.focus()}function i(e,t){var n=document.getElementById("form-message");n&&n.remove();let a=document.createElement("div");a.id="form-message",a.className=`alert alert-${"success"===e?"success":"danger"} mt-3`,a.innerHTML=t,document.getElementById("contact-form").after(a),setTimeout(()=>{a.classList.add("fade"),setTimeout(()=>{a.parentNode&&a.parentNode.removeChild(a)},500)},5e3)}window.openScheduleModal=function(){d.show()},window.submitScheduleForm=function(){var t=document.getElementById("schedule-form"),e=t.querySelectorAll("input[required], select[required]");let n=!0;if(e.forEach(e=>{e.value&&("email"!==e.type||c(e.value))?e.classList.remove("is-invalid"):(e.classList.add("is-invalid"),n=!1)}),n){var e=document.getElementById("schedule-form-feedback"),e=(e&&e.remove(),document.getElementById("scheduleName").value),a=document.getElementById("scheduleEmail").value,o=document.getElementById("schedulePhone").value,r=document.getElementById("scheduleDate").value,s=document.getElementById("scheduleTime").value,l=document.getElementById("scheduleService").value,i=document.getElementById("scheduleMessage").value||"Sem mensagem adicional",r=new Date(r).toLocaleDateString("pt-BR");window.open("https://wa.me/5598999882215?text="+(`*Agendamento VNX FIBER*%0A%0A*Nome:* ${e}%0A*Email:* ${a}%0A*Telefone:* ${o}%0A*Data:* ${r}%0A*Horário:* ${s}%0A*Serviço:* ${l}%0A*Mensagem:* `+i),"_blank"),t.reset(),d.hide()}else if(!document.getElementById("schedule-form-feedback")){let e=document.createElement("div");e.id="schedule-form-feedback",e.className="alert alert-danger mt-3",e.innerHTML="Por favor, corrija os campos destacados.",t.appendChild(e),setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e)},5e3)}};new Swiper(".swiper-container",{slidesPerView:1,spaceBetween:30,loop:!1,autoplay:{delay:3e3,disableOnInteraction:!1,pauseOnMouseEnter:!0},pagination:{el:".swiper-pagination",clickable:!0},breakpoints:{640:{slidesPerView:1},768:{slidesPerView:2},1024:{slidesPerView:3}}});var e=document.querySelectorAll(".counter");let t=new IntersectionObserver((e,s)=>{e.forEach(r=>{if(r.isIntersecting){let e=r.target,t=parseInt(e.innerText),n=0,a=2e3/t,o=()=>{n<t&&(n++,e.innerText=n,setTimeout(o,a))};o(),s.unobserve(e)}})},{threshold:.5}),a=(e.forEach(e=>{t.observe(e)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();e=document.querySelector(this.getAttribute("href"));e&&window.scrollTo({top:e.offsetTop-75,behavior:"smooth"})})}),document.getElementById("contact-form"));function i(e,t){let n=document.createElement("div");n.className=`alert alert-${"success"===e?"success":"danger"} mt-3 animate__animated animate__fadeIn`,n.innerHTML=t,document.getElementById("contact-form").parentNode.appendChild(n),setTimeout(()=>{n.classList.remove("animate__fadeIn"),n.classList.add("animate__fadeOut"),setTimeout(()=>{n.remove()},500)},5e3)}a&&a.addEventListener("submit",async function(e){e.preventDefault();var e=this.querySelector('button[type="submit"]'),t=e.innerHTML;e.innerHTML='<i class="fas fa-spinner fa-spin me-2"></i>Enviando...',e.disabled=!0;try{var n=`*Contato via site - VNX FIBER*%0A%0A*Nome:* ${document.getElementById("name").value}%0A*Email:* ${document.getElementById("email").value}%0A*Telefone:* ${document.getElementById("phone").value||"Não informado"}%0A*Assunto:* ${document.getElementById("subject").value||"Contato geral"}%0A*Mensagem:* `+document.getElementById("message").value;window.open("https://wa.me/5598999882215?text="+n,"_blank"),i("success","Mensagem enviada com sucesso! Entraremos em contato em breve."),a.reset()}catch(e){console.error("Erro ao enviar mensagem:",e),i("error","Ocorreu um erro ao enviar a mensagem. Por favor, tente novamente.")}finally{e.innerHTML=t,e.disabled=!1}});let n=document.querySelector(".navbar");function o(){50<window.scrollY?n.classList.add("navbar-scrolled"):n.classList.remove("navbar-scrolled")}window.addEventListener("scroll",o),o();document.querySelectorAll(".service-category").forEach(e=>{e.addEventListener("mouseenter",function(){this.classList.add("hovered")}),e.addEventListener("mouseleave",function(){this.classList.remove("hovered")})}),window.addEventListener("scroll",function(){var e,t=document.querySelector(".hero");t&&(e=window.scrollY,t.style.backgroundPosition=`center ${.4*e}px`)});e=document.querySelectorAll(".navbar-nav .nav-link");let r=document.querySelector(".navbar-collapse");function s(){let o=window.scrollY+150;document.querySelectorAll("section").forEach(e=>{var t=e.offsetTop,n=e.offsetHeight;let a=e.getAttribute("id");o>=t&&o<t+n&&document.querySelectorAll(".navbar-nav .nav-link").forEach(e=>{e.classList.remove("active"),e.getAttribute("href")==="#"+a&&e.classList.add("active")})})}e.forEach(e=>{e.addEventListener("click",()=>{r.classList.contains("show")&&r.classList.remove("show")})}),window.addEventListener("scroll",s),s()});